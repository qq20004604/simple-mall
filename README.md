# simple-mall

## 1、需求简述

商品商城流程

面向需方和供方的技术服务类应用商城业务全流程设计。

## 2、需求分析

基于需求描述，需要先明确系统中的角色、数据流动，写出产品PRD，然后基于产品 PRD 设计系统架构和流程。

具体系统架构和流程可以查看 ``doc/商城业务功能分析.rp``

或者访问网址来查看。

http://lovelovewall.com/simple_mall/doc/#g=1&p=%E5%95%86%E5%9F%8E

## 3、产品说明

在线浏览地址：<a href="http://lovelovewall.com/simple_mall/doc/#g=1&p=%E5%95%86%E5%9F%8E">点击访问</a>

项目设计&开发者：零零水（QQ：20004604）

* 产品设计文件，目录为 ``doc/商城业务功能分析.rp``
* 后端代码已经部署到服务器上：<a href="http://www.lovelovewall.com:8234/">点击访问</a>
* 初步测试已经通过，账号可以正常注册（当然，短信验证码也可以正常发送）；
* 后端代码：<a href="https://github.com/qq20004604/simple-mall/tree/master/Server">点击访问</a>
* 前端代码：<a href="https://github.com/qq20004604/simple-mall/tree/master/webpage">点击访问</a>
* 根据开发进度，已经建立了多个开发分支，master为主分支，每个分支开发完后，都已合并到主分支上。<a href="https://github.com/qq20004604/simple-mall/branches/active">点击访问各个分支</a>
* 整体项目基本已经开发完毕，但由于开发时间有限，仍有一些尚未完善的功能。

目前已开发上线的功能：

1. 注册；
2. 注册时短信验证；
3. 注册后自动登录；
4. 登录功能；
5. 登录状态保持；
6. 记录当前访问的页面，下次访问时自动进入该页面；
7. 用户角色分类（发单人与接单人）；
8. 根据权限控制，只允许用户类型为发单人进行创建新订单；
9. 所有人可以查看目前处于【已发布】与【有候选接单人】状态的订单；
10. 可以查看以上订单的订单详情；
11. 根据权限控制，只允许用户类型为接单人接取订单；
12. 发单人可以查看候选接单人的电话号码；
13. 发单人可以在候选接单人里面，选择一个设置为接单人；
14. 接单人可以在被选中自己为接单人时，将订单状态设置为进行中；
15. 接单人和发单人，可以在订单状态为进行中时，将订单状态设置为确认完成；
16. 在双方都设置订单为确认完成后，订单进入待评价状态；
17. 接单人和发单人，可以在订单完成后，对该订单打分，并可选写评分评语；
18. 在双方已评后，订单进入结束状态；
19. 在以上操作中，对用户权限进行控制，只允许符合要求的用户设置订单状态；
20. 以上异步请求，统一要求使用post请求json数据格式，并使用CSRF安全策略；
21. 封装了通用的返回函数，避免接口不统一；
22. 前端使用 antd 作为 ui 框架，react 作为 js 框架；
23. 使用了自己封装的 webpack 全套脚手架进行前端开发；
24. 使用了例如 hotload，devServer 等技术提高开发效率；
25. 脚手架的其他功能，参照我的Github项目：<a href="https://github.com/qq20004604/react-with-webpack">点击访问</a>；
26. 后端使用 Python 语言（版本3.8）；
27. 后端框架使用 Django3；
28. 自行封装了 CSRF 装饰器，根据当前后端是开发/生产环境，决定是否启用 CSRF 策略；
29. 封装了用户权限控制装饰器，对接口权限进行限制；
30. 对 Django 提供的 Form 类进行了扩展，方便快速返回 Form 表单校验信息；
31. 产品设计使用 Axure RP8 来撰写原型图、产品流程图等；
32. 静态资源使用 nginx 进行部署；
33. 后端直接部署在我的个人服务器上；





由于开发时间有限，目前尚有一些不太重要，有待于完善的功能：

1. 缺少找回密码/重设密码；
2. 缺少对滥用短信验证码行为的安全控制策略；
3. 缺少取消订单的功能（数据模型支持，但相关业务逻辑未开发）；
4. 页面展示效果，还有许多优化的余地；
5. 缺少管理员角色；
6. 缺少删除订单的功能；
7. 缺少新建订单数量的控制；
8. 缺少订单内容修改（以及历史版本快照）；
9. 缺少订单列表搜索、分类与筛选功能；
10. 缺少在订单状态变更时的重要节点，发送短信通知的功能；
11. 缺少后端服务设置为分布式部署；
12. 缺少自动化部署功能；
13. 未使用 Docker 来部署；
14. 缺少使用更专业的数据库，例如 MySQL（目前使用的是轻量化的sqlite3）；
15. 缺少代码自动化部署
16. 缺啥用户详细信息页面；
17. 缺少访问订单时，可以点击用户名快速访问用户详细信息；
18. 缺少查找某一用户，其历史订单相关信息的功能；
19. 缺少详细的日志系统；
